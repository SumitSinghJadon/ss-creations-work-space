{% extends 'base-3.html' %}

{% block main %}
<div class="h-full w-full rounded-lg overflow-y-auto">
    <div class="w-full rounded-xl flex space-y-3 flex-col h-full">
        <!-- Top 4 Cards with charts -->
        <div class="flex flex-wrap w-full">
            <div class="md:p-0 md:!pr-3 w-full md:w-1/2 lg:w-1/4">
                <div class="text-center bg-base-100 rounded-xl p-2 pb-0 shadow-lg" data-aos="zoom-in">
                    <div class="bg-emerald-400 font-semibold py-1 rounded-lg space-x-2">
                        <span><i class="fa-regular fa-chart-line-up"></i></span>
                        <span>PROFIT</span>
                    </div>
                    <div class="py-3">
                        <h1 class="text-xl font-bold">00,000</h1>
                        <span class="text-xs">Lorem ipsum dolor sit.</span>
                    </div>
                </div>
            </div>
            
            <div class="pt-2 md:p-0 lg:!pr-3 w-full md:w-1/2 lg:w-1/4">
                <div class="text-center bg-base-100 rounded-xl p-2 pb-0 shadow-lg" data-aos="zoom-in">
                    <div class="bg-rose-400 font-semibold py-1 rounded-lg space-x-2">
                        <span><i class="fa-regular fa-chart-line-up"></i></span>
                        <span>PROFIT</span>
                    </div>
                    <div class="py-3">
                        <h1 class="text-xl font-bold">00,000</h1>
                        <span class="text-xs">Lorem ipsum dolor sit.</span>
                    </div>
                </div>
            </div>
            
            <div class="pt-2 lg:pt-0 md:!pr-3 w-full md:w-1/2 lg:w-1/4">
                <div class="text-center bg-base-100 rounded-xl p-2 pb-0 shadow-lg" data-aos="zoom-in">
                    <div class="bg-amber-400 font-semibold py-1 rounded-lg space-x-2">
                        <span><i class="fa-regular fa-chart-line-up"></i></span>
                        <span>PROFIT</span>
                    </div>
                    <div class="py-3">
                        <h1 class="text-xl font-bold">00,000</h1>
                        <span class="text-xs">Lorem ipsum dolor sit.</span>
                    </div>
                </div>
            </div>
            
            <div class="pt-2 lg:pt-0 w-full md:w-1/2 lg:w-1/4">
                <div class="text-center bg-base-100 rounded-xl p-2 pb-0 shadow-lg" data-aos="zoom-in">
                    <div class="bg-cyan-400 font-semibold py-1 rounded-lg space-x-2">
                        <span><i class="fa-regular fa-chart-line-up"></i></span>
                        <span>PROFIT</span>
                    </div>
                    <div class="py-3">
                        <h1 class="text-xl font-bold">00,000</h1>
                        <span class="text-xs">Lorem ipsum dolor sit.</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Main Chart and Notification screen -->
        <div class="flex h-full w-full flex-grow flex-wrap md:flex-nowrap items-stretch md:space-x-3 space-y-3 md:space-y-0">
            <div class="bg-base-100 rounded-xl h-80 md:h-full w-full shadow-lg md:w-3/5 main-chart-wrapper">
                <div id="main-chart" class="pt-3"></div>
            </div>
            
            <div class="bg-base-100 rounded-xl h-80 md:h-full w-full shadow-lg md:w-2/5 p-2 pp-ntf-wrapper">
                <div class="px-3 py-1 w-full bg-base-200 items-center rounded-lg text-center">
                    <h1 class="font-semibold text-lg space-x-2">
                        <span><i class="fa-regular fa-bell-on"></i></span>
                        <span>Public Notification</span>
                    </h1>
                </div>
    
                <!-- B'day, calendar, task, public notification  -->
                <div class="p-2 public-notification overflow-y-auto">
                    <ul class="[&>*]:p-1 [&>*>span_i]:opacity-75 [&>*]:flex [&>*]:space-x-3 [&>*]:items-center hidden">
                        <li>
                            <span class="w-5"><i class="fa-regular fa-cake-candles"></i></span>
                            <span>Happy Birthday</span>
                        </li>
                        {% for item in dob_list %}
                        <li>
                            <span class="w-5"></span>
                            <p>
                                <span>Happy Birthday</span>
                                <span class="font-semibold">{{ item.emp_name }} [ {{ item.emp_paycode }}]</span>
                                <span>{{ item.dep_name }}</span>
                            </p>
                        </li>
                        {% endfor %}
                        {% for item in doj_list %}
                        <li>
                            <hr class="w-full">
                        </li>
                        <li>
                            <span class="w-5"><i class="fa-regular fa-user-plus"></i></span>
                            <p>
                                <span>New Joining</span>
                                <span class="font-semibold">{{ item.emp_name }} [ {{ item.emp_paycode }}]</span>
                                <span>{{ item.dep_name }}</span>
                            </p>
                        </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- Shortcut links -->
        <div class="bg-base-100 rounded-lg shadow-xl p-2">
            <div class="px-3 py-1 flex justify-between w-full bg-base-200 items-center rounded-lg">
                <h1 class="font-semibold text-lg space-x-2">
                    <span class="text-sm"><i class="fa-regular fa-arrow-up-right-from-square"></i></span>
                    <span>Shortcut Links</span>
                </h1>
                <button class="btn btn-primary btn-outline btn-xs">
                    <span><i class="fa-light fa-pencil"></i></span>
                    <span>Edit</span>
                </button>
            </div>
    
            <div class="pt-2 flex flex-wrap [&>*>a]:dark:!text-black [&>*]:p-2 [&>*>a]:btn [&>*>a]:btn-sm">
                {% for link in sc_link_list %}
                <div>
                    <a href="{{ link.link }}" style="background-color: {{link.color}};" class="hover:shadow-lg">
                        {{ link.name }}
                    </a>
                </div> 
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock main %}


{% block script %}
<script>
    $(document).ready(function () {
        let main_chart_h = $(".main-chart-wrapper").height() - 20;
        const in_time_list = {{chart_data.in_time_list}};
        const out_time_list = {{chart_data.out_time_list}};
        const working_hour_list = {{chart_data.working_hour_list}};

        var options = {
            legend: { show: false },
            series: [
                {
                    name: 'In Time',
                    type: 'line',
                    data: in_time_list
                },
                {
                    name: 'Working Hours',
                    type: 'area',
                    data: working_hour_list
                },
                {
                    name: 'Out Time',
                    type: 'line',
                    data: out_time_list
                }
            ],

            chart: {
                height: main_chart_h,
                type: 'line',
                stacked: false,
                // toolbar: { show: false },
                // zoom: { enabled: false },
            },
            stroke: {
                width: [5, 2, 5],
                curve: 'smooth'
            },
            plotOptions: {
                bar: {
                    columnWidth: '60%'
                }
            },

            fill: { opacity: [1, 0.5, 0.85] },

            labels: [
                '01','02','03','04','05','06','07','08','09','10',
                '11','12','13','14','15','16','17','18','19','20', 
                '21','22','23','24','25','26','27','28','29','20','31', '32'
            ],
            markers: { size: 0 },
            // xaxis: { type: 'datetime' },
            yaxis: { min: 0 },
            title: {
                text: 'Performance Chart',
                align: 'center',
                offsetY: 0,
                floating: true,
                style: {
                    fontSize: '14px',
                    fontWeight: 500,
                    color: '#263238'
                },
            }
        };

        var chart = new ApexCharts(document.querySelector("#main-chart"), options);
        chart.render();

        $(".public-notification").height(main_chart_h - 52);
        $(".public-notification ul").slideDown(1500);
    })
</script>
{% endblock script %}